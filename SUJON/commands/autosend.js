const schedule = require('node-schedule');
const moment = require('moment-timezone');
const chalk = require('chalk');

module.exports.config = {
    name: 'autosent',
    version: '10.0.1',
    hasPermssion: 0,
    credits: 'Shahadat Islam',
    description: 'Automatically sends messages at scheduled times (BD Time)',
    commandCategory: 'group messenger',
    usages: '[]',
    cooldowns: 3
};

const messages = [
    { time: '12:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦°à¦¾à¦¤ 12à¦Ÿà¦¾ ðŸŒ™\nà¦®à§‹à¦¬à¦¾à¦‡à¦² à¦›à¦¾à¦¡à¦¼à§‹, à¦­à§‚à¦¤ à¦à¦¸à§‡ à¦•à¦¾à¦¨à§‡ à¦•à¦¾à¦¨à§‡ à¦—à¦¾à¦¨ à¦§à¦°à¦¾à¦‡ à¦¦à¦¿à¦¬à§‡! ðŸ‘»ðŸŽ¶', special: null },
    { time: '1:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦°à¦¾à¦¤ 1à¦Ÿà¦¾ ðŸ•\nà¦˜à§à¦® à¦¨à¦¾ à¦¦à¦¿à¦²à§‡ à¦šà§‹à¦° à¦à¦¸à§‡ à¦¤à§‹à¦° à¦«à§à¦°à¦¿à¦œ à¦–à¦¾à¦²à¦¿ à¦•à¦°à§‡ à¦¦à§‡à¦¬à§‡! ðŸ˜¾ðŸ¥¶', special: null },
    { time: '2:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦°à¦¾à¦¤ 2à¦Ÿà¦¾ ðŸŒŒ\nà¦¤à§à¦‡ à¦¯à¦¦à¦¿ à¦œà§‡à¦—à§‡ à¦¥à¦¾à¦•à¦¿à¦¸, à¦¤à¦¾à¦¹à¦²à§‡ à¦®à¦¶à¦¾à¦°à¦¾ à¦ªà¦¾à¦°à§à¦Ÿà¦¿ à¦•à¦°à¦¬à§‡! ðŸ¦ŸðŸŽ‰', special: null },
    { time: '3:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦°à¦¾à¦¤ 3à¦Ÿà¦¾ ðŸ˜´\nà¦­à¦¾à¦‡ à¦˜à§à¦®à¦¾, à¦¨à¦¾à¦¹à¦²à§‡ à¦¸à¦•à¦¾à¦² à¦¬à§‡à¦²à¦¾ à¦¶à¦¶à¦¾à¦° à¦®à¦¤à§‹ à¦šà§‹à¦– à¦«à§à¦²à§‡ à¦¯à¦¾à¦¬à§‡ ðŸ¥’ðŸ‘€', special: null },
    { time: '4:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦­à§‹à¦° 4à¦Ÿà¦¾ ðŸŒ…\nà¦†à¦œà¦¾à¦¨ à¦†à¦¸à¦¤à§‡ à¦¯à¦¾à¦šà§à¦›à§‡, à¦¨à¦¡à¦¼à§‡ à¦šà¦¡à¦¼à§‡ à¦¬à¦¸ à¦¨à¦‡à¦²à§‡ à¦®à¦¾ à¦¬à¦•à¦¾ à¦¦à¦¿à¦¬à§‡! ðŸ•ŒðŸ™„', special: null },
    { time: '5:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦­à§‹à¦° 5à¦Ÿà¦¾ ðŸŒ„\nà¦«à¦œà¦°à§‡à¦° à¦¨à¦¾à¦®à¦¾à¦œ à¦ªà¦¡à¦¼, à¦¨à¦¾à¦¹à¦²à§‡ à¦¬à¦¾à¦²à¦¿à¦¶ à¦¤à§‹à¦° à¦¸à¦¾à¦¥à§‡ à¦à¦—à¦¡à¦¼à¦¾ à¦•à¦°à¦¬à§‡! ðŸ›ï¸ðŸ¤¬', special: null },
    { time: '6:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¸à¦•à¦¾à¦² 6à¦Ÿà¦¾ â˜€ï¸\nà¦˜à§à¦® à¦¥à§‡à¦•à§‡ à¦‰à¦ à§‡ à¦†à¦¯à¦¼à¦¨à¦¾ à¦¦à§‡à¦–à¦¿à¦¸ à¦¨à¦¾, à¦­à¦¯à¦¼ à¦ªà§‡à¦¯à¦¼à§‡ à¦¯à¦¾à¦¬à¦¿! ðŸ˜³ðŸªž', special: null },
    { time: '7:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¸à¦•à¦¾à¦² 7à¦Ÿà¦¾ â°\nà¦¦à¦¾à¦à¦¤ à¦¬à§à¦°à¦¾à¦¶ à¦•à¦° à¦¨à¦‡à¦²à§‡ à¦¶à§à¦¬à¦¾à¦¸à§‡ à¦®à¦¶à¦¾à¦°à¦¾ à¦®à¦¾à¦°à¦¾ à¦¯à¦¾à¦¬à§‡! ðŸª¥ðŸ’¨', special: null },
    { time: '8:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¸à¦•à¦¾à¦² 8à¦Ÿà¦¾ ðŸŒž\nà¦®à§‹à¦¬à¦¾à¦‡à¦² à¦°à§‡à¦–à§‡ à¦¨à¦¾à¦¸à§à¦¤à¦¾ à¦•à¦°, à¦¨à¦¾à¦¹à¦²à§‡ à¦°à§à¦Ÿà¦¿ à¦¤à§‹à¦° à¦¸à¦¾à¦¥à§‡ à¦«à¦¾à¦‡à¦Ÿ à¦•à¦°à¦¬à§‡ ðŸ¥–ðŸ¥Š', special: null },
    { time: '9:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¸à¦•à¦¾à¦² 9à¦Ÿà¦¾ â³\nà¦­à¦¾à¦‡/à¦†à¦ªà§ à¦¨à¦¾à¦¸à§à¦¤à¦¾ à¦•à¦°à¦²à¦¿? à¦¨à¦¾à¦¹à¦²à§‡ à¦ªà§‡à¦Ÿ à¦§à¦°à§à¦®à¦˜à¦Ÿ à¦¡à¦¾à¦•à¦¬à§‡! ðŸ³ðŸš«', special: null },
    { time: '10:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¸à¦•à¦¾à¦² 10à¦Ÿà¦¾ ðŸ˜œ\nà¦•à¦²à§‡à¦œ/à¦¸à§à¦•à§à¦² à¦—à§‡à¦²à¦¿ à¦¨à¦¾à¦•à¦¿? à¦¨à¦¾ à¦•à¦¿ à¦†à¦œ à¦†à¦¬à¦¾à¦° Netflix à¦šà¦²à¦›à§‡? ðŸ“šâž¡ï¸ðŸ“º', special: null },
    { time: '11:00 AM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¸à¦•à¦¾à¦² 11à¦Ÿà¦¾ ðŸ“±\nà¦…à¦¤à¦¿à¦°à¦¿à¦•à§à¦¤ à¦¨à¦¾à¦Ÿà¦• à¦•à¦°à¦²à§‡ à¦®à§‹à¦¬à¦¾à¦‡à¦² à¦°à¦¿à¦¸à§à¦Ÿà¦¾à¦°à§à¦Ÿ à¦¹à¦¬à§‡! ðŸ˜‚ðŸ”‹', special: null },
    { time: '12:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¦à§à¦ªà§à¦° 12à¦Ÿà¦¾ ðŸŒž\nGood Afternoon! à¦à¦–à¦¨ à¦˜à§à¦®à¦¾à¦²à§‡ à¦šà¦¾ à¦¬à¦¾à¦¨à¦¾à¦¬à§‡ à¦•à§‡? â˜•ðŸ˜´', special: null },
    { time: '1:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¦à§à¦ªà§à¦° 1à¦Ÿà¦¾ ðŸ™\nà¦­à¦¾à¦‡/à¦†à¦ªà§ à¦œà§‹à¦¹à¦°à§‡à¦° à¦¨à¦¾à¦®à¦¾à¦œ à¦ªà¦¡à¦¼à§‹, à¦¨à¦‡à¦²à§‡ à¦•à§à¦•à§à¦°à¦“ à¦°à¦¾à¦— à¦•à¦°à¦¬à§‡ ðŸ•ðŸ˜¡', special: null },
    { time: '2:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¦à§à¦ªà§à¦° 2à¦Ÿà¦¾ ðŸ˜³\nà¦—à§‹à¦¸à¦² à¦•à¦°, à¦¨à¦¾à¦¹à¦²à§‡ à¦ªà§à¦°à¦¤à¦¿à¦¬à§‡à¦¶à§€à¦°à¦¾ à¦¬à¦²à¦¬à§‡ à¦ªà§‡à¦à¦¯à¦¼à¦¾à¦œà§‡à¦° à¦¦à¦¾à¦® à¦¤à§‹à¦° à¦—à¦¾à¦¯à¦¼à§‡ ðŸ˜…ðŸ§…', special: null },
    { time: '3:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¬à¦¿à¦•à§‡à¦² 3à¦Ÿà¦¾ ðŸ’¤\nà¦˜à§à¦® à¦†à¦¸à¦¤à§‡à¦›à§‡? à¦¹à§‡à¦¡à¦«à§‹à¦¨ à¦–à§à¦²à§‡ à¦˜à§à¦®à¦¾, à¦¨à¦¾à¦¹à¦²à§‡ à¦—à¦¾à¦¨ à¦¸à§à¦¬à¦ªà§à¦¨à§‡ à¦¬à¦¾à¦œà¦¬à§‡ ðŸŽ¶ðŸ˜‚', special: null },
    { time: '4:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¬à¦¿à¦•à§‡à¦² 4à¦Ÿà¦¾ ðŸ¥µ\nà¦…à¦¨à§‡à¦• à¦—à¦°à¦®, à¦«à§à¦°à¦¿à¦œà§‡ à¦¢à§à¦•à§‡ à¦¥à¦¾à¦•à¦²à§‡ à¦•à§à¦² à¦¹à¦¬à§‡! ðŸ§ŠðŸ¤£', special: null },
    { time: '5:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¬à¦¿à¦•à§‡à¦² 5à¦Ÿà¦¾ ðŸ˜…\nà¦¹à¦¾à¦¸à¦¤à§‡ à¦¥à¦¾à¦•, à¦•à¦¾à¦°à¦£ à¦•à¦¾à¦¨à§à¦¨à¦¾ à¦•à¦°à¦²à§‡ à¦¡à§‡à¦Ÿà¦¾ à¦¶à§‡à¦· à¦¹à¦¬à§‡ à¦¨à¦¾! ðŸ“¶ðŸ˜‚', special: null },
    { time: '6:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¸à¦¨à§à¦§à§à¦¯à¦¾ 6à¦Ÿà¦¾ ðŸŒ†\nà¦¹à¦¾à¦¤-à¦®à§à¦– à¦§à§à¦¯à¦¼à§‡ à¦¨à§‡, à¦¨à¦¾à¦¹à¦²à§‡ à¦®à¦¶à¦¾à¦°à¦¾ à¦¤à§‹à¦°à§‡ VIP à¦­à¦¾à¦¬à§‡ à¦•à¦¾à¦®à¦¡à¦¼à¦¾à¦¬à§‡! ðŸ¦ŸðŸ‘‘', special: null },
    { time: '7:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦¸à¦¨à§à¦§à§à¦¯à¦¾ 7à¦Ÿà¦¾ ðŸ“š\nà¦ªà¦¡à¦¼à¦¤à§‡ à¦¬à¦¸ à¦¨à¦‡à¦²à§‡ à¦•à§à¦¯à¦¾à¦²à¦•à§à¦²à§‡à¦Ÿà¦°à¦“ à¦¤à§‹à¦•à§‡ à¦šà¦¿à¦¨à¦¬à§‡ à¦¨à¦¾! ðŸ”¢ðŸ˜­', special: null },
    { time: '8:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦°à¦¾à¦¤ 8à¦Ÿà¦¾ ðŸ˜Ž\nBot à¦•à§‡ à¦—à¦¾à¦²à¦¿ à¦¦à¦¿à¦¸ à¦¨à¦¾, à¦¨à¦‡à¦²à§‡ à¦¬à¦Ÿ à¦¤à§‹à¦°à§‡ à¦¬à§à¦²à¦• à¦•à¦°à§‡ à¦¦à¦¿à¦¬à§‡ ðŸ˜‚ðŸ¤–', special: null },
    { time: '9:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦°à¦¾à¦¤ 9à¦Ÿà¦¾ ðŸ½ï¸\nà¦¡à¦¿à¦¨à¦¾à¦° à¦•à¦°à¦²à¦¿? à¦¨à¦¾ à¦•à¦°à¦²à§‡ à¦¸à§à¦¬à¦ªà§à¦¨à§‡ à¦¬à¦¿à¦°à¦¿à¦¯à¦¼à¦¾à¦¨à¦¿ à¦¦à§‡à¦–à¦¬à¦¿ ðŸ¤¤ðŸ—', special: null },
    { time: '10:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦°à¦¾à¦¤ 10à¦Ÿà¦¾ ðŸ“±\nà¦®à§‹à¦¬à¦¾à¦‡à¦² à¦›à§‡à¦¡à¦¼à§‡ à¦˜à§à¦®à¦¾, à¦¨à¦¾à¦¹à¦²à§‡ à¦šà¦¾à¦°à§à¦œà¦¾à¦°à¦“ à¦†à¦¤à§à¦®à¦¹à¦¤à§à¦¯à¦¾ à¦•à¦°à¦¬à§‡! ðŸ”ŒðŸ˜«', special: null },
    { time: '11:00 PM', message: 'à¦à¦–à¦¨ à¦¬à¦¾à¦œà§‡ à¦°à¦¾à¦¤ 11à¦Ÿà¦¾ ðŸ˜”\nà¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à¦²à§‡à¦“ à¦˜à§à¦® à¦•à¦¿à¦¨à§à¦¤à§ à¦«à§à¦°à¦¿â€¦ à¦¤à¦¾à¦‡ à¦˜à§à¦®à¦¾à¦‡ à¦¯à¦¾à¦¨! ðŸ›ŒðŸ˜‚', special: null }
];

module.exports.onLoad = ({ api }) => {
    console.log(chalk.bold.hex("#00c300")("============ AUTOSENT COMMAND LOADED (BD TIME) ============"));

    messages.forEach(({ time, message }) => {
        const [hour, minute, period] = time.split(/[: ]/);
        let hour24 = parseInt(hour, 10);
        if (period === 'PM' && hour !== '12') {
            hour24 += 12;
        } else if (period === 'AM' && hour === '12') {
            hour24 = 0;
        }

        const rule = new schedule.RecurrenceRule();
        rule.tz = 'Asia/Dhaka';
        rule.hour = hour24;
        rule.minute = parseInt(minute, 10);

        schedule.scheduleJob(rule, () => {
            if (!global.data?.allThreadID) return;
            global.data.allThreadID.forEach(threadID => {
                api.sendMessage(message, threadID, (error) => {
                    if (error) {
                        console.error(`Failed to send message to ${threadID}:`, error);
                    }
                });
            });
        });

        console.log(chalk.hex("#00FFFF")(`Scheduled (BDT): ${time} => ${message}`));
    });
};

module.exports.run = () => {
    // Main logic is in onLoad
};
